# JS_study > 함수

## 1. 함수지향

### 2. 값으로서의 함수와 콜백

#### #1-1. 값으로서의 함수

* 자바스크립트에서는 **함수도 객체**이다. 즉, 함수는 일종의 값.
* 값 :: 어떤 변수의 담을 수 있음. 

  * `var a = 'value';`  `value`가 값이므로 `a`에 담을 수 있다. 함수 역시 변수에 넣을 수 있고 함수 자체가 값이 될 수 있다.

* 함수

* ~~~ javascript
  function a(){} // 함수
  /*
  * 함수의 변수 a라는 값에 담겨진 값.
  * function(){}는 변수 a에 담겨 있다. === var a = function(){}
  */
  ~~~

* 객체 안에 key 값, 변수역할 :: **속성(property)**

* 객체의 속성 값으로 담겨진 함수 :: **메서드(method)**

  ~~~ javascript
  a = { // 객체{}
      b: function(){
      }
  } 
  ~~~

  >* `{}`객체 의미. 함수는 값이고 객체 안에 저장될 수 있다. 
  >* 객체 안에 `b`는 key역할을 하고 있으며 변수역할. 이것을 **속성(property)** 이라 한다.
  >* 그 속에 저장되어 있는 값(`function(){}`) **메서드(method)** 라고 한다.
  >* a라고 담겨져 있는 객체 안에 b라는 속성을 가지고 있는 값을 메서드 또는 메서드 b 라고 한다.

* 함수는 값이기 때문에 다른 함수의 인자로 전달.

* 함수는 인자값으로 사용 가능.

  ~~~ javascript
  function cal(func, num){
      return func(num)
  }
  
  function increase(num){
      return num + 1;
  }
  
  function decrease(num){
      return num - 1;
  }
  alert(cal(increase, 1));
  alert(cal(decrease, 1));
  ~~~

> * `alert(cal(increase, 1));`을 실행하면 함수 cal은 첫 번째 인자로 전달된 increase를 실행하는데 이 때 두번째 인자(num)의 값이 1을 인자로 전달. 함수 increase는 계산된 결과를 리턴하고 cal은 다시 그 값을 리턴.

>   * ~~~ javascript
>     function cal(func, num){
>      return func(num)
>      }
>     /*
>     function increase(num){
>      return num + 1;
>     }
>     */
>     // cal(increase, 1)
>      function cal(func, num){
>      var func = increase(num){
>      return num + 1; // 1 + 1
>      }
>      }
>      alert(cal(increase, 1)); // 2
>     ~~~
>        * ()란 함수 호출 의미.
>        * 함수 cal의 첫 번째 인자인 `func`에 함수 increase에 전달.
>        * increase의 함수가 cal의 첫 번째 인자(`func`)에 전달된다.

> * ~~~ javascript
>   function cal(func, num){
>   return func(num)
>   }
>   function decrease(num){
>   return num - 1;
>   }
>   // cal(decrease, 1)
>   function cal(func, num){
>   var func = decrease(num){
>   return num - 1; // 1 - 1
>   }
>   }
>   alert(cal(decrease, 1));
>   ~~~





* 함수는 함수의 리턴값 값으로 사용 가능.

~~~ javascript
function cal(mode){
    var funcs = {
        'plus' : function(left, right){ return left + right },
        'minus' : function(left, right){ return left - right }
    }
    return funcs[mode];
}
alert(cal('plus')(2,1));
alert(cal('minus')(2,1));
~~~

> * ~~~ javascript
>   // alert(cal('plus')(1,2));
>   // cal('plus')(plus => 속성)의 value
>   function(left, right){ return left + right } // 를 리턴.
>   // (2,1) => 함수 호출.
>   function(2,1){ return 2 + 1 } // 3
>   ~~~
>
>   * `return fund[mode];`인 이유?
>     * 인자로 전달된 문자열 mode를 이용해서 `funcs['plus']`나 `funcs('minus')`를 리턴하기 위한 것. 그렇게 리턴된 함수를 실제 사용하기 위해 뒤에 인자 리스트 `()`를 붙인다.
>   * 함수 cal인자가 `cal(A,B)`가 아닌 `cal('plus)(2,1)`인 이유?
>     * cal 함수는 인자를 하나만 받는다.


* 배열의 값으로도 사용 가능.

~~~ javascript
var process = [
    function(input){ return input + 10; }, // 함수0
    function(input){ return input * input; }, // 함수1
    function(input){ return input / 2; } // 함수2
];
var input = 1; // 값을 호출하기 위한 변수지정.
for(var i = 0; i < process.length; i++){
    input = process[i](input);
}
alert(input);
~~~

> * ~~~ javascript
>   for(var i = 0; i < process.length; i++){ // 0 1 2
>   input = process[i](input);
>   // process[0](input) = function(input){ return input + 10; }
>   // function(1) => 11;
>   // process[1](input) = function(input){ return input * input; }
>   // function(11) => 121;
>   // process[2](input) = function(input){ return input / 2; }
>   // function(121) => 60.5
>   }
>   alert(input); // 60.5
>   ~~~

* First class citizen(object, value) 
  * 변수, 매개변수, 리턴값 등 자바스크립트의 함수는 다양하게 활용 가능.



---



#### #1-2. 콜백

* 처리의 위임.

  * 값으로서 사용하느 함수. 함수의 인자로 함수 전달가능.

  * ~~~javascript
    var numbers = [20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1];
    console.log(numbers.sort()); // [1, 10, 2, 20, 3, 4, 5, 6, 7, 8, 9]
    /*
    * 결과
    문자로 입력받았기 때문에 이러한 결과가 나온다.
    */
    // numbers(객체, 배열)
    // sorts() 함수
    // 배열이 갖고 있는 함수, sort는 함수라고 하지 않고 객체에 속해 있기 때문에 메소드, 배열이나 sort가 가지고 있는 메소드는 자바스크립트의 기본 기능이기 때문에 빌트인메소드(내장객체)라고 한다. 우리가 만드는 객체, 함수, 메소드는 내장객체가 아니라 사용자정의함수, 사용자정의객체라고 한다.
    ~~~

    > * ~~~javascript
    >   var numbers = [20, 10, 9, 8, 7, 6, 5, 4, 3, 2, 1];
    >   var sortfunc = function(a,b){
    >   console.log(a, b);
    >   /*
    >   if(a > b){
    >   return 1;
    >   }else if(a < b){
    >   return -1;
    >   }else{
    >   return 0; // 값이 같을 때
    >   }
    >   */
    >   return a - b;
    >   }
    >   console.log(numbers.sort(sortfunc));
    >   ~~~

    > * `sortfunc`콜백함수. sort라는 메서드가 sortfunc인자를 받아 sort의 기본적인 동작방법을 변경가능
    >
    > * 즉 값으로서 함수를 인자받았기 때문에 변경 가능.
    >
    > * 자바스크립트 함수가 값이기 때문에 콜백이 가능.


* 비동기 처리

* 홈페이지를 운영하고 있고 만명정도의 구독자. 글을 작성하면 만명구독자에게 이메일 전송. 작성완료. = 동기적처리

* 이메일발송부분을 예약. 작성완료 / todo style = 비동기 처리

* 알고있기(개념)

* Ajax(A비synchoronus동기) Javascript And XML 

* 웹페이지가 전달되지않고 서버와 웹브라우저가 내부적으로 통신하는 것.

* 웹서버에서만 처리 가능.

* ~~~ javascript
  $.get('url',
        fucntion(result){
        	console.log(result); // result는 함수의 인자인데 url의 인자들을 해석해서 호출. result의 결과값을 가져온다. 
        }, 'json');
  function = 서버를 통신이 끝났을 때 호출되도록 약속된 함수.
  ~~~

  > * 비지니스 로직, 사용자에게 위임을 하는 방법을 통해 콜백함수활용. 함수를 매개변수값으로 전달을 통해서 result 인자를 넣음으로서 함수를 매개변수값으로 전달함으로 GET메서드의 동작을 원하느대로 변경가능.



